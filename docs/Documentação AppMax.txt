1. Conceitos de Neg√≥cio
Seja bem-vindo √† documenta√ß√£o da nossa API.

Esta documenta√ß√£o re√∫ne tudo o que voc√™ precisa para integrar com nossa API de forma completa e eficiente, potencializando o seu neg√≥cio.

O que √© a Appmax?

Gateway, antifraude e adquir√™ncia em um s√≥ lugar para entregar alta performance com simplicidade. A Appmax oferece pagamentos r√°pidos, seguros e eficientes para impulsionar o seu neg√≥cio digital. De e-commerces a SaaS e infoprodutores, milhares de empresas confiam em nossa plataforma para vender mais, com menos esfor√ßo e m√°xima confiabilidade.

Se ainda n√£o conhe√ßa a Appmax, convidamos voc√™ a visitar nosso site oficial e nossa loja de aplicativos para conhecer melhor nossos produtos e servi√ßos.
1.1. Introdu√ß√£o
Entenda como criar e integrar aplicativos na Appstore da Appmax para expandir recursos, personalizar lojas e conectar sistemas externos.

O que √© a API/Loja de Aplicativos da Appmax?

A API da Appmax permite criar e gerenciar clientes, pedidos, pagamentos e outros recursos essenciais para o funcionamento de uma loja.
Ela √© pensada para que desenvolvedores integrem de forma eficiente, garantindo seguran√ßa e flexibilidade atrav√©s da cria√ß√£o de um aplicativo.

A Loja de Aplicativos da Appmax permite que:

Terceiros criem aplicativos para oferecer servi√ßos aos comerciantes.

Comerciantes adicionem funcionalidades extras √†s suas pr√≥prias lojas.

Benef√≠cios da Appstore:

Personaliza√ß√£o da experi√™ncia da loja.
Integra√ß√£o com servi√ßos externos.
Adi√ß√£o de recursos diretamente no painel de administra√ß√£o.
Tipos de Aplicativos:

Aplicativo Privado: ideal para desenvolvedores que desejam integrar e processar vendas exclusivamente em seus pr√≥prios ambientes. Esse tipo de app n√£o fica dispon√≠vel publicamente na base da Appmax, podendo ser acessado apenas por meio de um link compartilhado pelo pr√≥prio desenvolvedor. Essa funcionalidade permite que parceiros criem solu√ß√µes personalizadas sem exp√¥-las ao p√∫blico, garantindo uma experi√™ncia mais segura, exclusiva e otimizada, tanto para desenvolvedores quanto para lojistas.

Aplicativo P√∫blico: √© um aplicativo que ficar√° dispon√≠vel para toda a base de clientes da Appmax. Com ele, desenvolvedores podem oferecer suas solu√ß√µes de forma ampla, permitindo que qualquer lojista utilize o app diretamente atrav√©s da plataforma.

Seguran√ßa:

O acesso √† API √© restrito por par de chaves.
As chaves s√£o emitidas na instala√ß√£o do aplicativo e devem ser armazenadas de forma segura.
O uso de tokens tempor√°rios garante que credenciais n√£o fiquem expostas em requisi√ß√µes.
1.1.1. Requisitos T√©cnicos
Obrigat√≥rios:
Autentica√ß√£o:
√â o processo de verificar se quem est√° tentando acessar a API tem permiss√£o para isso. √â uma forma de garantir que apenas usu√°rios ou sistemas autorizados consigam usar os recursos da API. A autentica√ß√£o com a API da Appmax deve seguir o fluxo de autentica√ß√£o e autoriza√ß√£o descrito na documenta√ß√£o oficial.

Seguran√ßa Appmax:
Devido as rigorosas diretrizes do PCI DSS (Padr√£o de Seguran√ßa de Dados da Ind√∫stria de Cart√µes de Pagamento), √© essencial implementar o Appmax.js, uma biblioteca JavaScript da Appmax que deve ser inclu√≠da no front-end do site sem alterar o visual da loja. Sua principal fun√ß√£o √© proteger dados sens√≠veis do cart√£o, garantindo que essas informa√ß√µes n√£o passem pelos servidores externos.

Cria√ß√£o de Cliente:
Para que seja poss√≠vel criar pedidos na Appmax, primeiro √© necess√°rio registrar os dados do comprador (cliente final) no sistema. Esse cadastro gera um identificador √∫nico (customer_id), que ser√° utilizado posteriormente na cria√ß√£o dos pedidos, pagamentos e estornos.

Aten√ß√£o: O IP do cliente final deve ser enviado durante esse processo.

Cria√ß√£o de Pedido:
Criar um pedido na API significa registrar a compra vinculada a um cliente. Esse processo gera um order_id, que ser√° usado para acompanhar o status do pagamento, realizar estornos e outras opera√ß√µes relacionadas.

Pagamentos
Cart√£o de Cr√©dito: √© uma forma de comprar um produto ou servi√ßo usando limite de cr√©dito fornecido pelo emissor do cart√£o, com a possibilidade de pagar o valor integral ou parcelado depois. Existem duas formas de processar o pagamento via cart√£o: -Via Appmax JS (uso de CDN): √© uma forma de capturar os dados do cart√£o diretamente no navegador do cliente, usando um JavaScript fornecido pela Appmax, para cumprir as regras de seguran√ßa PCI DSS (Payment Card Industry Data Security Standard) sem que os dados sens√≠veis passem pelo seu servidor. - Via Tokeniza√ß√£o (API**): √© um processo usado para substituir os dados reais de um cart√£o de cr√©dito (como n√∫mero, CVV e validade) por um token √∫nico e seguro, para que transa√ß√µes possam ser feitas sem expor as informa√ß√µes originais.
Pix: √© o sistema de pagamento instant√¢neo criado e gerenciado pelo Banco Central do Brasil.
Boleto: √© basicamente um documento de cobran√ßa emitido por um banco, que cont√©m: Valor a pagar, Data de vencimento, C√≥digo de barras e/ou linha digit√°vel, Informa√ß√µes do benefici√°rio (quem vai receber o pagamento) e Dados do pagador.
ApplePay: √© o sistema de pagamentos da Apple que permite fazer compras usando iPhone, Apple Watch, iPad ou Mac, sem precisar digitar dados do cart√£o toda vez. Funciona com cart√µes de d√©bito e cr√©dito.
C√°lculo de Parcelas:
Rota usada para retornar os valores de cada parcela, com base no total do pedido e nas taxas de parcelamento configuradas na Appmax. Evita configura√ß√µes manuais externas, mantendo valores alinhados √†s regras da Appmax, suportando de 1 a 12 parcelas, configur√°veis diretamente na Appmax. Possui duas modalidades: - PP (Simples por Parcela): juros aplicados diretamente em cada parcela. - AM (Financiamento): juros aplicados mensalmente sobre o saldo devedor total.

Estorno de Pagamentos:
√â a devolu√ß√£o de um valor pago ao comprador, feita pelo vendedor ou pela operadora de pagamento, usando o mesmo meio de pagamento utilizado na compra. Existem duas op√ß√µes para a realiza√ß√£o de estornos:

Via API:O merchant envia uma requisi√ß√£o solicitando o estorno diretamente de sua plataforma. Recomendado para cart√£o de cr√©dito e Pix, pois no boleto √© necess√°rio informar os dados banc√°rios do cliente na Appmax para que o valor seja ressarcido.
Via Painel Appmax: O merchant solicita o estorno manualmente no painel da Appmax, ser√° enviado o evento de refund via webhook para atualiza√ß√£o do status do pedido na sua plataforma . Recomendado para cart√£o de credito, pix e boleto.
C√≥digo de Rastreio:
√â um identificador √∫nico fornecido pela transportadora ou servi√ßo de entrega, que permite acompanhar a confirma√ß√£o da entrega do produto encomenda para o cliente. Para que os saques do merchant sejam aprovados, √© necess√°rio atualizar o pedido na Appmax com o c√≥digo de rastreamento da entrega.

Webhooks:
√â um mecanismo de comunica√ß√£o entre sistemas que permite que um aplicativo envie informa√ß√µes em tempo real para outro quando um evento espec√≠fico acontece, sem que o outro sistema precise ficar consultando constantemente. A Appmax envia notifica√ß√µes de eventos via Webhook. Todos os eventos s√£o importantes, mas os essenciais para o funcionamento da integra√ß√£o est√£o descritos em:

Outras Funcionalidades Opcionais:
Recorr√™ncia:
A recorr√™ncia √© um modelo de pagamento em que o cliente √© cobrado periodicamente por um produto ou servi√ßo, de forma autom√°tica, sem precisar autorizar cada pagamento manualmente. Em fase de beta tester, solicite caso tenha interesse em participar.

Link de pagamento por API:
√â uma URL gerada pela Appmax que permite que um cliente pague um produto ou servi√ßo de forma r√°pida e segura, sem precisar de um carrinho de compras completo. Em fase de beta tester, solicite caso tenha interesse em participar.

Upsell
√â uma rota √© uma estrat√©gia de vendas usada para incentivar o cliente a comprar um produto complementar do item que est√° adquirindo ou considerando comprar.

Recupera√ß√£o de Vendas com IA
A Appmax oferece uma solu√ß√£o inovadora para recuperar carrinhos de compra abandonados, utilizando intelig√™ncia artificial para aumentar a convers√£o da loja do Merchant. Com nosso endpoint dedicado, suas integra√ß√£o pode enviar automaticamente os carrinhos de abandono, permitindo a√ß√µes personalizadas de recupera√ß√£o de vendas. Saiba mais Em fase de beta tester, solicite caso tenha interesse em participar.

Cen√°rios contemplados pela recupera√ß√£o de vendas:
Abandono no pagamento com cart√£o de cr√©dito;
Abandono no pagamento via Pix;
Pedidos negados no cart√£o de cr√©dito;
1.1.2. Diferen√ßa entre os ambientes de Sandbox e Produ√ß√£o
Entenda a diferen√ßa entre os ambientes dispon√≠veis no desenvolvimento do seu aplicativo na Appmax.

Diferen√ßa entre os ambientes Sandbox e Produ√ß√£o
A Appmax oferece dois ambientes distintos para integra√ß√£o:

üß™ Sandbox (Ambiente de Testes)
Para testar a integra√ß√£o antes de ir para produ√ß√£o e de ser aprovado na homologa√ß√£o.
A autentica√ß√£o e a API utilizam subdom√≠nios diferentes:
Autentica√ß√£o Sandbox:
cURL

https://auth.sandboxappmax.com.br
API Sandbox:
cURL

https://api.sandboxappmax.com.br
O redirecionamento para autoriza√ß√£o ocorre na Appmax BC Sandbox:
cURL

https://breakingcode.sandboxappmax.com.br/appstore/integration/HASH
üöÄ Produ√ß√£o
Para transacionar com clientes reais.
URLs padr√£o de autentica√ß√£o e API:
Autentica√ß√£o Produ√ß√£o:
cURL

https://auth.appmax.com.br
API Produ√ß√£o:
cURL

https://api.appmax.com.br
O redirecionamento para autoriza√ß√£o ocorre no Admin da Appmax:
cURL

https://admin.appmax.com.br/appstore/integration/HASH
Resumo:
No sandbox, as URLs come√ßam com sandboxappmax e o redirecionamento √© para BC Sandbox.
Em produ√ß√£o, as URLs s√£o padr√£o appmax e o redirecionamento √© para o Admin da Appmax.
1.1.3. Status de pedidos
Ao longo do processo de um pedido, ele passa por diferentes status. Abaixo, h√° uma listagem que descreve cada um desses status, os quais representam fases espec√≠ficas do processo do pedido. Al√©m disso apresentaremos os status que voc√™ dever√° usar nas suas integra√ß√µes, mas ao entrar no painel, eles podem ter outra nomenclatura, visando uma experi√™ncia melhor do lojista.

pendente

Status no painel: Pagamento pendente

Todos os pedidos que ainda n√£o est√£o pagos, um pedido de cart√£o de cr√©dito que ainda n√£o foi autorizado, um pedido de pix que ainda n√£o foi pago ou um pedido de boleto que n√£o compensou, isso inclui os de boletos vencidos que nunca foram pagos.

aprovado

Status no painel: Pagamento aprovado

Indica que est√° tudo certo com o pagamento do pedido, a partir desse status os valores j√° s√£o disponibilizados na conta do lojista.

autorizado

Status no painel: An√°lise antifraude

Um pedido de cart√£o de cr√©dito passa do status pendente para esse status ao ser autorizado pelo banco emissor e possuir saldo, a partir desse momento √© iniciado o processo de an√°lise antifraude e se tudo estiver correto, o pedido ir√° para aprovado.

cancelado

Status no painel: N√£o autorizado

Pedidos de PIX que tiveram o tempo de validade do QRCode expirado, pedidos de cart√£o que n√£o foram autorizados pelo banco emissor, ou n√£o possuem saldo ficam nesse status.

H√° uma exce√ß√£o tamb√©m para pedidos criados internamente pelo painel, que nunca receberam uma transa√ß√£o de pagamento tamb√©m se encontram com esse status.

estornado

Status no painel: Estornado

Um pedido que recebeu uma solicita√ß√£o de reembolso aprovada por parte do cliente ou por parte do lojista recebe esse status, no momento que um pedido passa por esse status √© realizado o d√©bito do valor na conta do lojista.

recusado_por_risco

Status no painel: Recusado por risco

Para transa√ß√µes que s√£o consideradas de alto risco e n√£o passam na an√°lise de antifraude, o pedido ser√° estornado e depois receber√° esse status.

integrado

Status no painel: Pagamento aprovado

Esse √© o status final para um pedido aprovado, ap√≥s passar pelas valida√ß√µes das integra√ß√µes, ele est√° pronto para ser enviado ao comprador final (em casos de produtos f√≠sicos).

pendente_integracao

Status no painel: Pagamento aprovado

Esse status indica que o pedido est√° pago, mas h√° alguma pend√™ncia com a integra√ß√£o, isso pode acontecer por alguma informa√ß√£o incorreta no cadastro ou no produto.

pendente_integracao_em_analise

Status no painel: Pagamento aprovado

Quando um pedido foi aprovado, mas antes de passar para integrado ele recebe uma solicita√ß√£o de estorno, esse status √© atribu√≠do, a partir desse momento uma an√°lise manual ser√° executada, pois caso a solicita√ß√£o de estorno seja aprovada, os produtos n√£o devem ser enviados, esse status √© incomum mas pode acontecer.

chargeback_em_tratativa

Status no painel: Chargeback

Quando recebemos uma sinaliza√ß√£o do banco que um chargeback ocorreu, o pedido √© estornado e depois recebe esse status. Saiba mais neste artigo.

chargeback_em_disputa

Status no painel: Chargeback

Quando a Appmax inicia uma disputa para recuperar um chageback, o pedido sai do status de tratativa e recebe esse status.

chargeback_perdido

Status no painel: Chargeback

Quando n√£o h√° mais formas de recuperar um chargeback, o pedido recebe esse status.

chargeback_vencido

Status no painel: Chargeback recuperado

Quando vencemos uma disputa de chargeback, o pedido receber√° esse status, a partir desse momento, o lojista recebe o cr√©dito em seu saldo.
1.1.4. SLA e orienta√ß√µes para homologa√ß√£o
O processo de homologa√ß√£o possui uma s√©rie de etapas e cen√°rios essenciais para validar a funcionalidade e a conformidade dos aplicativos na Loja de Aplicativos. Abaixo est√° um resumo organizado e ajustado para facilitar a compreens√£o e a aplica√ß√£o.

Processo de Homologa√ß√£o

Objetivo

Validar os dados do aplicativo e realizar testes ponta a ponta para garantir que ele atenda aos padr√µes exigidos.

In√≠cio do Processo

√â iniciado at√© 3 dias √∫teis ap√≥s a integra√ß√£o sinalizar a finaliza√ß√£o da implementa√ß√£o.
O processo pode durar at√© 7 dias √∫teis.

Regra para Adequa√ß√µes

A cada nova solicita√ß√£o de adequa√ß√£o, o aplicativo retorna para o final da fila de homologa√ß√£o e com o mesmo prazo citado acima

Requisitos para Homologa√ß√£o

Sinalizar no canal oficial com a equipe de integra√ß√£o.
Disponibilizar uma conta e uma loja de teste, para poder simular o processo igual a um merchant.
Enviar os acessos necess√°rios para o e-mail: integracoes@appmax.com.br.
Disponibilizar uma documenta√ß√£o com o passo a passo da instala√ß√£o do aplicativos.
Segue abaixo a lista de cen√°rios essenciais que ser√£o avaliados durante a homologa√ß√£o do aplicativo na Appmax. Por√©m, outros testes podem ser realizados, mas recomendamos que os listados abaixo sejam verificados previamente para aumentar a assertividade no processo:

Cen√°rios de Testes:

Valida√ß√µes Gerais

Valida√ß√£o do logo do aplicativo.
Valida√ß√£o da descri√ß√£o do aplicativo.
Valida√ß√£o do e-mail de suporte.
Instala√ß√£o do aplicativo.
Testes de Compra e estorno (Pessoa F√≠sica - PF)

Cen√°rio de compra no cart√£o com juros com CPF.
Cen√°rio de compra no cart√£o sem juros com CPF.
Cen√°rio de compra no Pix com CPF.
Cen√°rio de compra no boleto com CPF.
Estorno total no cart√£o com juros com CPF.
Estorno total no cart√£o sem juros com CPF.
Estorno total no Pix com CPF.
Estorno total no boleto com CPF.
Estorno parcial no cart√£o com juros com CPF (via Appmax).
Estorno parcial no cart√£o sem juros com CPF (via Appmax).
Testes de Compras e Estornos (Pessoa Jur√≠dica - PJ)

Compra no Pix com CNPJ.
Compra no boleto com CNPJ.
Compra no cart√£o com juros com CNPJ.
Compra no cart√£o sem juros com CNPJ.
Estorno total no Pix com CNPJ.
Estorno total no boleto com CNPJ.
Estorno total no cart√£o sem juros com CNPJ.
Estorno total no cart√£o com juros com CNPJ.
Estorno parcial no cart√£o com juros com CNPJ.
Estorno parcial no cart√£o sem juros com CNPJ.
Estorno parcial no Pix com CNPJ.
Estorno parcial no boleto com CNPJ.
Outros Cen√°rios

Avaliar como ficar√° o softer descriptor nas compras de cart√£o.
Testar integra√ß√£o do c√≥digo de rastreio.
Avaliar o IP registrado nos pedidos.
Testar compras com cupom de desconto.
Testar compras com frete e juros.
Testar compras com frete + cupom de desconto.
Testar compras com mais de um produto diferente no carrinho.
Testar compras com m√∫ltiplas unidades do mesmo produto no carrinho.
Testar a atualiza√ß√£o de status dos pedidos.
Obs.: Se o seu app n√£o for voltado para o processamento de pagamentos pela Appmax, os cen√°rios acima podem ser desconsiderados e a an√°lise ser√° realizada com base em outros crit√©rios.
1.1.5. Autentica√ß√£o e Autoriza√ß√£o na API
Motivo para N√£o Utiliza√ß√£o de Refresh Tokens

Nossa API adota um modelo de autentica√ß√£o e autoriza√ß√£o que n√£o utiliza refresh tokens. Esta decis√£o baseia-se na arquitetura espec√≠fica da nossa integra√ß√£o, que √© projetada para comunica√ß√£o entre servidores (server-to-server), ao inv√©s de uma aplica√ß√£o frontend (como uma Single Page Application - SPA) se comunicando com um backend. Abaixo est√£o os principais pontos que justificam essa abordagem:

Natureza da Integra√ß√£o Server-to-Server:
Em nossa arquitetura, a comunica√ß√£o ocorre diretamente entre servidores, o que significa que os tokens de acesso s√£o gerenciados em ambientes controlados e seguros. Isso reduz a necessidade de mecanismos adicionais para a renova√ß√£o de tokens, como os refresh tokens.
Seguran√ßa e Simplicidade:
A utiliza√ß√£o de tokens de acesso de curta dura√ß√£o oferece uma camada robusta de seguran√ßa ao limitar a janela de tempo em que um token pode ser utilizado. Em um ambiente server-to-server, onde as credenciais e os tokens podem ser armazenados de maneira segura, esta abordagem simplifica o gerenciamento de tokens sem comprometer a seguran√ßa.
Redu√ß√£o da Complexidade:
Implementar e gerenciar refresh tokens adiciona uma camada extra de complexidade. Isso inclui o armazenamento seguro de refresh tokens, a rota√ß√£o de tokens, e a l√≥gica para a renova√ß√£o de tokens de acesso. Dado que nossos servidores s√£o ambientes confi√°veis e seguros, optamos por uma abordagem mais direta e eficaz.
Conformidade com Melhores Pr√°ticas de Server-to-Server:
Em integra√ß√µes server-to-server, √© comum a utiliza√ß√£o de tokens de acesso curtos com autentica√ß√£o baseada em chaves ou certificados. Este m√©todo √© amplamente aceito como uma pr√°tica segura e eficiente, que atende bem √†s necessidades de comunica√ß√£o entre servidores.
Como Funciona:

Autentica√ß√£o Inicial: Os servidores autenticam-se utilizando chaves de API ou certificados digitais.
Tokens de Acesso de Curta Dura√ß√£o: Ap√≥s a autentica√ß√£o, um token de acesso de curta dura√ß√£o √© emitido e deve ser usado para todas as requisi√ß√µes subsequentes.
Renova√ß√£o de Tokens: Quando um token de acesso expira, o servidor pode obter um novo token atrav√©s do processo de autentica√ß√£o inicial, mantendo a seguran√ßa e a simplicidade.
Vantagens:

Seguran√ßa: Limita o per√≠odo de uso dos tokens de acesso, reduzindo o risco de utiliza√ß√£o indevida em caso de comprometimento.
Simplicidade: Elimina a necessidade de armazenamento e gerenciamento de refresh tokens.
Efici√™ncia: Adequado para ambientes controlados e seguros, onde a comunica√ß√£o ocorre diretamente entre servidores.
Nossa abordagem assegura que a autentica√ß√£o e autoriza√ß√£o na nossa API sejam realizadas de maneira segura e eficiente, adequada √† natureza de integra√ß√µes server-to-server.
1.1.6. Simulador de cart√£o de cr√©dito
Para simular transa√ß√µes de cart√£o de cr√©dito definimos algumas regras que devem ser utilizadas. Cada uma dessas regras implica em uma resposta da API, e dessa forma voc√™ pode testar transa√ß√µes de cart√£o de cr√©dito.

Para testar cada cen√°rio abaixo, √© preciso enviar o respectivo n√∫mero de cart√£o, com uma data de expira√ß√£o futura.

Os n√∫meros dos cart√µes e seus respectivos cen√°rios s√£o esses:

N√∫mero do cart√£o	Cen√°rio
4000000000000010	Cart√£o de sucesso. Qualquer opera√ß√£o com esse cart√£o √© realizada com sucesso.
4000000000000028	Cart√£o de falha. Qualquer transa√ß√£o retorna como "n√£o autorizada".
Qualquer outro cart√£o	Qualquer transa√ß√£o retorna como "n√£o autorizada".

1.2. Webhooks
Como funciona
Quando um dos eventos selecionados ocorrer para o merchant, enviaremos uma requisi√ß√£o para o host que voc√™ forneceu durante a cria√ß√£o do aplicativo. Cada requisi√ß√£o ter√° um payload espec√≠fico, variando de acordo com o evento que foi desencadeado.

Evento (Descri√ß√£o)	event	event_type
Cliente criado	customer_created	customer
Cliente Interessado	customer_interested	customer
Cliente Contatado	customer_contacted	customer
Pedido Autorizado	order_authorized	order
Pedido Aprovado	order_approved	order
Boleto Criado	order_billet_created	order
Pedido Pago	order_paid	order
Pedido Pendente Integra√ß√£o	order_pending_integration	order
Pedido Estornado	order_refund	order
Upsell Pago	order_up_sold	order
Pix Gerado	order_pix_created	order
Pix Pago	order_paid_by_pix	order
Pix Expirado	order_pix_expired	order
Pedido Integrado	order_integrated	order
Pedido com Boleto Vencido	order_billet_overdue	order
Pedido Autorizado com Atraso	order_authorized_with_delay	order
Pedido em Chargeback em Tratamento	order_chargeback_in_treatment	order
Assinatura Cancelada	subscription_cancelation	subscription
Assinatura Atrasada	subscription_delayed	subscription
Pagamento Autorizado com Atraso	payment_authorized_with_delay	payment
Pagamento N√£o Autorizado	payment_not_authorized	payment

1.3. Appmax JS
Entenda como implementar o script de seguran√ßa da Appmax

O appmax.js √© uma biblioteca JavaScript desenvolvida pela Appmax para integra√ß√£o f√°cil e segura em p√°ginas de checkout. Ao incluir o appmax.js em sua p√°gina, voc√™ n√£o precisa se preocupar com altera√ß√µes no visual da loja, j√° que o script atua de forma discreta e eficiente.

Como funciona
Devido √†s rigorosas diretrizes do Padr√£o de Seguran√ßa de Dados da Ind√∫stria de Cart√µes de Pagamento (PCI DSS), √© crucial proteger dados sens√≠veis, como informa√ß√µes de cart√µes de pagamento. Al√©m disso realizamos a coleta de IP para a seguran√ßa do fluxo de pagamento.

O appmax.js foi projetado para atender a essas preocupa√ß√µes de seguran√ßa. Ao integrar o appmax.js, voc√™ evita que dados sens√≠veis do cart√£o de cr√©dito passem diretamente pelos seus servidores.

O uso desse script √© obrigat√≥rio, logo para integrar com a Appmax, voc√™ precisar√° incluir o script em seu checkout, caso voc√™ possua certifica√ß√£o PCI, a funcionalidade de tokeniza√ß√£o √© opcional, mas a funcionalidade de coleta de IP √© obrigat√≥ria, atrav√©s dela conseguimos garantir a seguran√ßa das transa√ß√µes e an√°lises em nosso fluxo de pagamento.

Como usar
Incluir o Script da CDN:
Javascript

<script src="https://scripts.appmax.com.br/appmax.min.js"></script>
Inicializar o AppmaxScripts
Ap√≥s carregar o script, voc√™ precisa inicializar o AppmaxScripts com uma fun√ß√£o de sucesso e uma fun√ß√£o de erro.
Funcionalidades dispon√≠veis
Coleta do IP do Cliente
Tokeniza√ß√£o de Pagamento

2. Criar aplicativo
Entenda como criar um aplicativo na Appmax

Na Appmax, durante a cria√ß√£o de um aplicativo, √© poss√≠vel optar entre dois tipos: P√∫blico ou Privado.

Aplicativo Privado: ideal para desenvolvedores que desejam integrar e processar vendas exclusivamente em seus pr√≥prios ambientes. Esse tipo de app n√£o fica dispon√≠vel publicamente na base da Appmax, podendo ser acessado apenas por meio de um link compartilhado pelo pr√≥prio desenvolvedor. Essa funcionalidade permite que parceiros criem solu√ß√µes personalizadas sem exp√¥-las ao p√∫blico, garantindo uma experi√™ncia mais segura, exclusiva e otimizada, tanto para desenvolvedores quanto para lojistas.

Aplicativo Publico: √© um aplicativo que ficar√° dispon√≠vel para toda a base de clientes da Appmax. Com ele, desenvolvedores podem oferecer suas solu√ß√µes de forma ampla, permitindo que qualquer lojista utilize o app diretamente atrav√©s da plataforma.

Cria√ß√£o do aplicativo
Durante o processo de cria√ß√£o, √© necess√°rio escolher se o seu aplicativo ser√° P√∫blico ou Privado.



Abaixo, veja as principais diferen√ßas entre eles:

Caracter√≠stica	Aplicativo P√∫blico	Aplicativo Privado
Exibi√ß√£o na AppStore	Vis√≠vel para todos os usu√°rios	N√£o aparece na listagem, acesso somente pelo link exclusivo
Forma de Acesso	Dispon√≠vel na p√°gina oficial da Loja de Aplicativos da Appmax	Acesso apenas por link de compartilhamento
Instala√ß√£o	Instala√ß√£o direta pela Loja de aplicativos da Appmax	Instalado atrav√©s de link, vis√≠vel para o desenvolvedor ap√≥s cria√ß√£o do aplicativo possibilitando o compartilhamento
Para criar um aplicativo, ser√° necess√°rio informar algumas informa√ß√µes sobre seu aplicativo, que ser√° dividido em tr√™s etapas:

Sobre o aplicativo
Neste espa√ßo, voc√™ dever√° adicionar algumas informa√ß√µes detalhadas sobre o aplicativo.
Nome do aplicativo: O nome que ser√° exibido para os merchants e como utilizaram para pesquisar seu app. Possui limite de at√© 30 caracteres.
E-mail de suporte: E-mail que os usu√°rios poder√£o te acionar em caso de d√∫vidas.
Descri√ß√£o do aplicativo: Dever√° descrever sobre objetivo, benef√≠cios e servi√ßos oferecidos pelo aplicativo para que os merchants consigam identificar a funcionalidade de seu aplicativo. Esse texto possui um limite de at√© 100 caracteres e ser√° exibido junto com o nome.
Modelo de cobran√ßa: Como deseja que seu aplicativo seja cobrado dos merchants, sendo dividido em duas op√ß√µes:
Cobran√ßa via Plataforma Externa: A cobran√ßa ser√° realizada diretamente em sua plataforma, sem envolvimento da Appmax.
Cobran√ßa via Appmax: Nessa op√ß√£o, voc√™ dever√° definir um valor fixo que ser√° cobrado do merchant mensalmente na Appmax, descontando o valor diretamente do saldo parceiro. Nesse formato, o time entrar√° em contato com voc√™ para solicitar seus dados banc√°rios para que seja realizado o repasse de seus valores.
Imagens do Aplicativo
Fa√ßa o upload da imagem que servir√° como avatar para o seu aplicativo. √â importante observar que a imagem deve atender aos requisitos de tamanho e tipo de arquivos exigidos.
A imagem deve ser um quadrado no tamanho 1200px x 1200px, PNG ou JPG, sem cantos arredondados.
Configura√ß√µes do Aplicativo
Nesta etapa, voc√™ ter√° a oportunidade de escolher quais eventos de webhook ser√£o enviados para o seu aplicativo.
Ap√≥s a configura√ß√£o do aplicativo
Voc√™ ser√° direcionado para uma p√°gina de sucesso e dever√° clicar na op√ß√£o ‚ÄúConsultar Aplicativo‚Äù para concluir o desenvolvimento de seu aplicativo.
Ser√° exibida uma lista, e voc√™ dever√° clicar na op√ß√£o ‚ÄúDesenvolver‚Äú, o que abrir√° uma modal.

Id do aplicativo: A Chave de API que voc√™ dever√° utilizar para se comunicar com o sistema da Appmax. Essa chave serve como uma credencial de seguran√ßa, permitindo que o seu aplicativo autentique e acesse os recursos necess√°rios na plataforma da Appmax. Certifique-se de proteger essa chave e utiliz√°-la de forma segura para garantir a integridade e seguran√ßa das suas intera√ß√µes com o sistema.
Host: √© necess√°rio fornecer a URL para onde enviaremos as requisi√ß√µes dos eventos escolhidos. Esta URL servir√° como o endpoint para os webhooks do seu aplicativo, permitindo que receba notifica√ß√µes em tempo real sobre os eventos selecionados. Certifique-se de fornecer uma URL v√°lida e segura para garantir a correta entrega das requisi√ß√µes.
URL do sistema: Adicione a URL do seu sistema. Esta √© a URL que ser√° disponibilizada para o merchant conseguir acessar seu sistema.
URL de valida√ß√£o: Adicione uma URL para a instala√ß√£o do aplicativo. Ser√° utilizada para validar que o aplicativo foi instalado com sucesso pelo merchant.
Observa√ß√£o: Neste modal, voc√™ tem duas op√ß√µes dispon√≠veis. Ao selecionar ‚ÄúEnviar para an√°lise‚Äú, o aplicativo ser√° direcionado para an√°lise por nossa equipe. Se optar por ‚ÄúTestar‚Äú, receberemos uma notifica√ß√£o e entraremos em contato para fornecer os acessos necess√°rios em nossa √°rea de homologa√ß√£o para realizar os testes.

Fique atento ao seu e-mail cadastrado. Qualquer comunica√ß√£o referente ao status da an√°lise do seu aplicativo ser√° enviada para esse endere√ßo de e-mail. Certifique-se de verificar regularmente sua caixa de entrada, incluindo a pasta de spam ou lixo eletr√¥nico, para garantir que voc√™ n√£o perca nenhuma atualiza√ß√£o importante sobre o processo de an√°lise do seu aplicativo na Appmax.

2.2. Sobre as credenciais
Entenda como funciona as credenciais do aplicativo e como obter as credenciais da API da Appmax.

Sobre as credenciais
A API da Appmax utiliza dois pares de credenciais (client_id e client_secret), cada um com uma finalidade diferente:

Credenciais do Aplicativo (App credentials)
Essas credenciais (client_id e client_secret) s√£o utilizadas apenas para a instala√ß√£o do aplicativo e gera√ß√£o das credenciais do merchant.
O escopo dessas credenciais √© limitado √† autentica√ß√£o e autoriza√ß√£o da instala√ß√£o, n√£o permitindo a realiza√ß√£o de transa√ß√µes na API.
Elas devem ser utilizadas em conjunto com o app_id para autorizar a instala√ß√£o.
Credenciais do Merchant (Merchant credentials)
Para cada instala√ß√£o do aplicativo, ser√° gerado um novo par de credenciais (client_id e client_secret) exclusivo para o merchant.
Essas credenciais t√™m escopo completo na API com base nas configura√ß√µes do seu aplicativo, permitindo a cria√ß√£o de clientes, pedidos, pagamentos e outras opera√ß√µes transacionais, se for o caso.
Ap√≥s a instala√ß√£o e autoriza√ß√£o do aplicativo, esse par de credenciais ser√° utilizado para todas as requisi√ß√µes √† API.


2.3. Instala√ß√£o do Aplicativo
Entenda como obter o token do aplicativo e realizar a autoriza√ß√£o da instala√ß√£o.

1. Obter o token do aplicativo
Antes de qualquer requisi√ß√£o, √© necess√°rio obter o token de acesso do seu aplicativo.

Endpoint:
POST https://auth.appmax.com.br/oauth2/token

Requisi√ß√£o (cURL)
cURL

curl --location 'https://auth.appmax.com.br/oauth2/token' \
--header 'Content-Type: application/x-www-form-urlencoded' \
--data-urlencode 'grant_type=client_credentials' \
--data-urlencode 'client_id=CLIENT_ID' \
--data-urlencode 'client_secret=CLIENT_SECRET'
Exemplo de Resposta
JSON

{
    "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6Ikp...",
    "token_type": "Bearer",
    "expires_in": 3600
}
Importante: O access_token obtido aqui ser√° utilizado nas pr√≥ximas requisi√ß√µes como Bearer Token.

2. Autorizar a instala√ß√£o do aplicativo
Agora, com o token de acesso do aplicativo, precisamos gerar um hash de autoriza√ß√£o para fazer o redirect e criar as credenciais do merchant.

app_id: Chave de API utilizada para que seu aplicativo se comunique com o sistema da Appmax. Ela funciona como uma credencial de seguran√ßa, permitindo autentica√ß√£o e acesso aos recursos necess√°rios na plataforma.
external_key: Chave fornecida pelo sistema da plataforma parceira, usada para identificar com precis√£o a origem da instala√ß√£o. Normalmente corresponde a algum identificador j√° existente no ambiente do cliente/lojista (como store_id, merchant_id, company_key etc.). Essa informa√ß√£o n√£o √© controlada pela Appmax, apenas recebemos e repassamos para que a plataforma utilize e correlacione com o sistema dela.
url_callback: URL para onde o usu√°rio ser√° redirecionado ap√≥s a gera√ß√£o e valida√ß√£o do hash, permitindo que a plataforma finalize o fluxo de cria√ß√£o das credenciais do merchant.
Requisi√ß√£o para gerar o hash (token):
cURL

curl --location 'https://api.appmax.com.br/app/authorize' \
--header 'Content-Type: application/json' \
--header 'Authorization: Bearer SEU_TOKEN' \
--data '{
    "app_id": "APP_ID",
    "external_key": "EXTERNAL_KEY",
    "url_callback": "URL_CALLBACK"
}'
Exemplo de resposta com o hash:
JSON

{
    "data": {
        "token": "12083w36219d223f33ecf48f2a7f5ccf143b0bc554"
    }
}
üìò
O token recebido √© o hash que deve ser utilizado para redirecionar o usu√°rio ao sistema da Appmax para autorizar a instala√ß√£o.

üìç URL de Redirecionamento
üöß
Substitua o "HASH" no final da URL pelo hash gerado anteriormente

Exemplo: https://breakingcode.sandboxappmax.com.br/appstore/integration/12083w36219d223f33ecf48f2a7f5ccf143b0bc554

Sandbox: https://breakingcode.sandboxappmax.com.br/appstore/integration/HASH
Produ√ß√£o: https://admin.appmax.com.br/appstore/integration/HASH
2.4. Criar as credenciais do Merchant
Entenda o fluxo de cria√ß√£o das credenciais do Merchant e como implementar o Health Check de instala√ß√£o.

1. Criar credenciais do Merchant
Ap√≥s o usu√°rio autorizar a instala√ß√£o, o pr√≥ximo passo √© gerar as credenciais do merchant, que ser√£o usadas para transacionar na API (criar pedidos, clientes, pagamentos, etc).

Endpoint:
POST https://api.appmax.com.br/app/client/generate

Requisi√ß√£o (cURL
cURL

curl --location 'https://api.appmax.com.br/app/client/generate' \
--header 'Content-Type: application/json' \
--header 'Authorization: Bearer SEU_TOKEN' \
--data '{
    "token": "12083w36219d223f33ecf48f2a7f5ccf143b0bc554"
}'
Exemplo de Resposta
JSON

{
    "data": {
        "client": {
            "client_id": "MERCHANT_CLIENT_ID",
            "client_secret": "MERCHANT_CLIENT_SECRET"
        }
    }
}
Essas credenciais s√£o exclusivas do merchant e devem ser usadas para realizar transa√ß√µes na API.

Health check no aplicativo para concluir a instala√ß√£o:
Quando houver a instala√ß√£o do aplicativo por parte do merchant na Appmax, ser√° enviado uma requisi√ß√£o POST para a URL especificada informada no campo URL de valida√ß√£o, localizado no modal durante a etapa de cria√ß√£o do aplicativo. Esta requisi√ß√£o conter√° o app_id (ID do aplicativo), client_id e client_secret que s√£o as chaves de acesso para API da Appmax, e a external_key que √© uma chave que os usu√°rios que instalam seu aplicativo podem fornecer para uma identifica√ß√£o mais precisa:

JSON

{
  "app_id": "APP_ID",
  "client_id": "MERCHANT_CLIENT_ID",
  "client_secret": "MERCHANT_CLIENT_SECRET",
  "external_key": "EXTERNAL_KEY"
}
Esperamos como resposta um retorno com HTTP Code 200, contendo a resposta que inclui o external_id. Este external_id ser√° um ID √∫nico para cada instala√ß√£o armazenado em seu banco de dados, facilitando a identifica√ß√£o do v√≠nculo criado em sua base.

JSON

{
  "external_id": "37bb0791-ee0b-457d-860c-186e32978bcd"
}
Resumo:
Obtenha o token do aplicativo usando as credenciais do seu app (client_id e client_secret).
Autorize a instala√ß√£o do aplicativo, gerando um hash que ser√° utilizado no redirecionamento.
Ap√≥s a autoriza√ß√£o do usu√°rio, utilize o hash para gerar as credenciais do merchant.
Utilize essas credenciais (client_id e client_secret) para realizar transa√ß√µes na API.
3. Como criar ou atualizar um Cliente
Entenda como fazer a cria√ß√£o ou a atualiza√ß√£o de um cliente na Appmax

Esta rota permite criar ou atualizar um cliente com ou sem produto vinculado, utilizando como chave de identifica√ß√£o a combina√ß√£o:

first_name + last_name + email + phone + ip.

üí°
Dica:

Se enviar apenas os campos obrigat√≥rios, o cliente ser√° registrado como "carrinho abandonado", podendo ser atualizado depois pela mesma rota.

‚ö†Ô∏è
Pr√©-requisito:

Para criar um cliente, voc√™ precisa ter feito a coleta de IP utilizando o script Appmax JS.

Caso ainda n√£o tenha feito a coleta de IP, siga antes a documenta√ß√£o:

Coletar IP do Cliente

Exemplo de Requisi√ß√£o (cURL)
cURL

curl --request POST \
     --url https://api.appmax.com.br/v1/customers \
     --header 'accept: application/json' \
     --header 'content-type: application/json' \
     --data '
{
  "first_name": "Junior",
  "last_name": "Almeida",
  "email": "junior.almeida@email.com",
  "phone": "51983655100",
  "document_number": "25226493029",
  "address": {
    "postcode": "91520270",
    "street": "Rua Francisco Carneiro da Rocha",
    "number": "582",
    "complement": "Casa",
    "district": "Moinhos de Ventos",
    "city": "Porto Alegre",
    "state": "RS"
  },
  "ip": "127.0.0.1",
  "products": [
    {
      "sku": "9000010",
      "name": "Livro de receitas",
      "quantity": 1,
      "unit_value": 12300,
      "type": "digital"
    }
  ],
  "tracking": {
    "utm_source": "google",
    "utm_campaign": "teste"
  }
}
'
Par√¢metros do Body:
Campo	Tipo	Obrigat√≥rio	Descri√ß√£o
first_name	string	‚úÖ	Nome do cliente
last_name	string	‚úÖ	Sobrenome do cliente
email	string	‚úÖ	E-mail v√°lido
phone	string	‚úÖ	Telefone com DDD
document_number	string	‚ùå	CPF ou CNPJ
address	object	‚ùå	Endere√ßo do cliente
ip	string	‚úÖ	IP de origem
products	array	‚ùå	Lista de produtos vinculados
tracking	object	‚ùå	Dados de origem da visita
Exemplo de Resposta (JSON)
201 ‚Äì Cliente criado com sucesso
JSON

{
  "data": {
    "customer": {
      "id": 1
    }
  }
}
422 ‚Äì Erro de valida√ß√£o dos dados
JSON

{
  "message": "The given data failed to pass validation.",
  "errors": {
    "message": {
      "first_name": [
        "The first_name field is required."
      ],
      "last_name": [
        "The last_name field is required."
      ],
      "phone": [
        "The phone field must be a string.",
        "The phone field must have a maximum of 11 characters."
      ],
      "email": [
        "The email field is required.",
        "The email field must be a string."
      ],
      "ip": [
        "The ip field is required."
      ]
    }
  }
}
‚ö†Ô∏è
Importante:

Guarde o valor de customer_id retornado nesta etapa, mesmo que temporariamente.

Ele ser√° necess√°rio para criar o pedido na pr√≥xima etapa do fluxo.

Sem este ID, n√£o ser√° poss√≠vel criar um pedido pois √© necess√°rio vincular o cliente ao pedido.

3.1. Coleta de IP do Customer
Como fazer a coleta de IP utilizando o Appmax JS para criar um Cliente na Appmax.

Ao utilizar o atributo data-appmax-customer em um formul√°rio, a CDN coleta automaticamente o endere√ßo IP do cliente. Isso elimina a necessidade de l√≥gica adicional para capturar o IP, simplificando o processo de coleta de dados do cliente.

Exemplo de Formul√°rio com Coleta de IP:
O IP pode ser adicionado automaticamente no formul√°rio HTML

HTML

<form id="customer-form" data-appmax-customer>
  <div>
    <label for="first-name">Primeiro Nome:</label>
    <input type="text" id="first-name" name="first-name" required />
  </div>
  <div>
    <label for="last-name">√öltimo Nome:</label>
    <input type="text" id="last-name" name="last-name" required />
  </div>
  <div>
    <label for="email">Email:</label>
    <input type="email" id="email" name="email" required />
  </div>
  <div>
    <label for="phone">Telefone:</label>
    <input type="text" id="phone" name="phone" required />
  </div>
  <div>
    <label for="document-number">N√∫mero do Documento:</label>
    <input type="text" id="document-number" name="document-number" required />
  </div>
  <button type="submit">Enviar</button>
</form>
Ou tamb√©m, ao utilizar frameworks, recuperando os dados no m√©todo de sucesso e enviando no formul√°rio de cria√ß√£o do customer

JavaScript

<script setup>
import { ref, onMounted } from 'vue'

const customer = ref({
  first_name: '',
  last_name: '',
  email: '',
  phone: '',
  ip: ''
})

const success = (data) => {
  customer.value.ip = data.ip || 'IP n√£o encontrado.'
}

const error = (error) => {
  console.error('Error:', error)
}

onMounted(() => {
  const script = document.createElement('script')
  script.src = 'https://scripts.appmax.com.br/appmax.min.js'
  script.onload = () => {
    if (window.AppmaxScripts) {
      window.AppmaxScripts.init(success, error)
    } else {
      console.error('AppmaxScripts n√£o carregado.')
    }
  }
})

const submitForm = async () => {
  // Enviar o objeto customer
}
</script>

<template>
  <div>
    <h1>Customer Form</h1>
    <form @submit.prevent="submitForm" data-appmax-customer>
      <div>
        <label for="firstName">First Name:</label>
        <input v-model="customer.first_name" id="firstName" type="text" required />
      </div>
      <div>
        <label for="lastName">Last Name:</label>
        <input v-model="customer.last_name" id="lastName" type="text" required />
      </div>
      <div>
        <label for="email">Email:</label>
        <input v-model="customer.email" id="email" type="email" required />
      </div>
      <div>
        <label for="phone">Phone:</label>
        <input v-model="customer.phone" id="phone" type="text" required />
      </div>

      <button type="submit">Submit</button>
    </form>
  </div>
</template>

4. Como criar um pedido na Appmax
Nesta se√ß√£o, voc√™ aprender√° o fluxo completo para criar um pedido na Appmax ‚Äî desde o cadastro do cliente at√© a consulta final do status do pedido.
Esse processo √© dividido em quatro etapas, e cada uma delas possui sua pr√≥pria subse√ß√£o com detalhes, exemplos e boas pr√°ticas.

üîÑ Vis√£o Geral do Fluxo
Criar ou atualizar um cliente
Cadastra um novo cliente ou atualiza um existente para vincul√°-lo ao pedido.
Criar o pedido
Gera o registro do pedido no sistema, associando-o ao cliente.
Efetuar o pagamento
Processa o pagamento usando um dos m√©todos dispon√≠veis: Apple Pay, cart√£o de cr√©dito, Pix ou boleto.
Consultar o status e os dados do pedido
Recupera informa√ß√µes atualizadas sobre o pedido, incluindo status de pagamento e entrega.

4.1. Criar um Pedido
Como criar um Pedido na Appmax.

O endpoint POST /v1/orders √© utilizado para criar um novo pedido na Appmax.

Um pedido deve estar sempre vinculado a um cliente previamente criado no sistema.

‚ö†Ô∏è
Pr√©-requisito:

Para criar um pedido, voc√™ precisa ter o customer_id do cliente.

Caso ainda n√£o tenha criado o cliente, siga antes a documenta√ß√£o:

Criar ou atualizar cliente na Appmax

Exemplo de Requisi√ß√£o (cURL)
cURL

curl --request POST \
     --url https://api.appmax.com.br/v1/orders \
     --header 'accept: application/json' \
     --header 'content-type: application/json' \
     --data '
{
  "customer_id": 29,
  "products_value": 12300,
  "discount_value": 0,
  "shipping_value": 3999,
  "products": [
    {
      "sku": "9000010",
      "name": "Livro de receitas",
      "quantity": 1,
      "unit_value": 12300,
      "type": "digital"
    }
  ]
}
'

Par√¢metros do Body:
Campo	Tipo	Obrigat√≥rio	Descri√ß√£o
customer_id	number	‚úÖ	ID do cliente (obtido na etapa de cria√ß√£o do cliente)
products_value	number	‚ùå	Valor total dos produtos
discount_value	number	‚ùå	Valor do desconto
shipping_value	number	‚ùå	Valor do frete
products	array	‚úÖ	Lista de produtos do pedido
Objeto products
Campo	Tipo	Obrigat√≥rio	Descri√ß√£o
sku	string	‚úÖ	SKU do produto
name	string	‚úÖ	Nome do produto
quantity	number	‚úÖ	Quantidade do produto
unit_value	number	‚úÖ	Valor unit√°rio do produto (em centavos)
type	string	‚ùå	Tipo do produto (physical ou digital, padr√£o: physical)
Exemplo de Resposta (JSON)
201 ‚Äì Pedido criado com sucesso (retorna os dados do pedido no body)
JSON

{
  "data": {
    "order": {
      "id": 1,
      "status": "aprovado"
    }
  }
}
404 ‚Äì Cliente ou dados necess√°rios n√£o encontrados

{
  "error": {
    "message": "Merchant not found"
  }
}
422 ‚Äì Erro ao validar os dados do pedido
JSON

{
  "errors": {
    "message": {
      "products_value": [
        "The products value must be an integer."
      ],
      "shipping_value": [
        "The shipping value must be an integer."
      ],
      "discount_value": [
        "The discount value must be an integer."
      ],
      "products": [
        "The products field is required."
      ]
    }
  }
}

üí°
Dica

Armazene o order_id retornado nesta etapa, pois ele ser√° necess√°rio para efetuar o pagamento ou consultar o status do pedido nas pr√≥ximas etapas.

4.1.2. C√°lculo do valor total do Pedido
O c√°lculo do valor total de uma order segue a seguinte regra:
C√°lculo Baseado no Unit Value dos Produtos:
Se o valor unit√°rio (unit_value) de cada produto for informado, o valor total ser√° a soma do valor de todos os produtos. Por exemplo, se forem passados tr√™s produtos com valores de R$ 10,00, R$ 30,00 e R$ 50,00, o valor total dos produtos ser√° R$ 90,00.
Caso a compra seja parcelada, os juros devem ser calculados sobre o valor total dos produtos somado ao frete (shipping_value). Por exemplo, se o valor dos produtos for de R$ 90,00 e o frete for R$ 15,00, o valor total a ser considerado para o c√°lculo dos juros ser√° R$ 105,00. Se for aplicado um juros de 10% em 5x, o valor final ser√° de R$ 115,50 (R$ 105,00 + R$ 10,50 de juros). Esse valor ajustado deve ser distribu√≠do entre os produtos proporcionalmente.

Exemplo de Requisi√ß√£o (cURL)
cURL

curl --request POST \
     --url https://api.appmax.com.br/v1/orders \
     --header 'accept: application/json' \
     --header 'content-type: application/json' \
     --data '
{
    "customer_id": 113543689,
    "discount_value": 0,
    "shipping_value": 1500,
    "products": [
        {
            "sku": "46_0",
            "name": "PRODUTO_TEST_PARA_2",
            "quantity": 1,
            "unit_value": 1350
        },
        {
            "sku": "47_0",
            "name": "PRODUTO_TEST_PARA_2",
            "quantity": 1,
            "unit_value": 3350
        },
        {
            "sku": "48_0",
            "name": "PRODUTO_TEST_PARA_2",
            "quantity": 1,
            "unit_value": 5350
        }
    ]
}

C√°lculo Baseado no Products Value com Juros:
Se o valor unit√°rio (unit_value) de cada produto n√£o for informado, √© obrigat√≥rio passar o valor total dos produtos (products_value) com juros e frete j√° calculados. Ou seja, a soma do valor total dos produtos deve incluir tanto os juros quanto o frete. Por exemplo, se o valor total dos produtos e frete for R$ 105,00 e os juros forem de 10%, o valor final ser√° de R$ 115,50. Esse valor deve ser informado diretamente.


Exemplo de Requisi√ß√£o (cURL)
cURL

curl --request POST \
     --url https://api.appmax.com.br/v1/orders \
     --header 'accept: application/json' \
     --header 'content-type: application/json' \
     --data '
{
    "customer_id": 113543689,
    "products_value": 10050,
    "discount_value": 0,
    "shipping_value": 1500,
    "products": [
        {
            "sku": "46_0",
            "name": "PRODUTO_TEST_PARA_2",
            "quantity": 1            
        },
        {
            "sku": "47_0",
            "name": "PRODUTO_TEST_PARA_2",
            "quantity": 1            
        },
        {
            "sku": "48_0",
            "name": "PRODUTO_TEST_PARA_2",
            "quantity": 1            
        }
    ]
}
Regras Gerais
Sempre √© necess√°rio enviar o c√°lculo com os juros inclu√≠dos, seja no valor de cada produto individualmente ou no valor total dos produtos e frete.
O sistema n√£o faz o c√°lculo dos juros automaticamente; o valor informado j√° deve estar ajustado de acordo com a forma de pagamento, os juros aplic√°veis e o frete. Se os juros forem aplicados, o valor final dever√° refletir esse acr√©scimo, considerando tamb√©m o frete no c√°lculo.
4.2. Consultar Dados de um Pedido
Este endpoint permite consultar os detalhes de um pedido previamente criado para um merchant. Basta informar o ID do pedido na URL.

1. Autentica√ß√£o
A requisi√ß√£o precisa incluir um token Bearer, obtido no fluxo de autentica√ß√£o do merchant.

Headers
Nome	Tipo	Obrigat√≥rio	Descri√ß√£o
Authorization	string	‚úÖ	Token de autentica√ß√£o no formato Bearer {TOKEN}.
2. Exemplo de Requisi√ß√£o (cURL)
cURL

curl --location 'https://api.appmax.com.br/v1/orders/3531' \
--header 'Authorization: Bearer SEU_TOKEN'
3. Exemplo de Resposta (JSON)
JSON

{
    "data": {
        "order": {
            "id": 3531,
            "status": "estornado",
            "total_paid": 8916,
            "amounts": {
                "sub_total": 4662,
                "shipping_value": 2738,
                "discount": 0,
                "installment_fee": 1516
            },
            "created_at": "2025-02-13 14:09:48",
            "updated_at": "2025-02-13 14:11:55"
        },
        "customer": {
            "id": 2023,
            "name": "Junior Almeida",
            "email": "junior.almeida@teste.com",
            "document_number": "19100000000"
        },
        "payment": {
            "method": "creditcard",
            "installments": 12,
            "installments_amount": 743,
            "card": {
                "brand": "visa",
                "number": "400000****0010"
            },
            "paid_at": "2025-02-13 14:10:20"
        },
        "refund": {
            "refunded_at": "2025-02-13 14:11:55"
        }
    }
}
Observa√ß√µes
O objeto payment pode estar vazio se o pagamento ainda n√£o foi processado.
O objeto refund pode estar vazio caso n√£o haja reembolso no pedido.
Resumo
Consulta um pedido existente usando apenas o order_id.
Retorna dados completos do pedido, pagamento, reembolso e cliente.
Requer autentica√ß√£o com token Bearer gerado com as credenciais do merchant.

5. Como efetuar um pagamento
A API da Appmax permite a cria√ß√£o de pagamentos para pedidos j√° existentes utilizando diferentes m√©todos.

M√©todos dispon√≠veis:
Apple Pay
Cart√£o de Cr√©dito
Pix
Boleto
‚ö†Ô∏è
Pr√©-requisito geral:

Antes de criar um pagamento, voc√™ precisa ter:

order_id ‚Üí ID do pedido
customer_id ‚Üí ID do cliente
Veja como obt√™-los nas se√ß√µes:

Criar/Atualizar um Cliente
Criar um Pedido

5.2. Pagamento com Cart√£o de Cr√©dito
Entenda como o que √© necess√°rio e como efetuar um pagamento com cart√£o de cr√©dito na Appmax

O pagamento por cart√£o de cr√©dito permite parcelamento, personaliza√ß√£o do soft descriptor (texto exibido na fatura) e integra√ß√£o direta ao fluxo de checkout.

Existem duas formas de processar pagamentos com cart√£o de cr√©dito:

Via Appmax JS (CDN): captura os dados do cart√£o diretamente no navegador do cliente usando um JavaScript fornecido pela Appmax, garantindo conformidade com o PCI DSS sem que os dados sens√≠veis passem pelo seu servidor.
Via Tokeniza√ß√£o (API): substitui os dados reais do cart√£o (n√∫mero, CVV e validade) por um token seguro, permitindo realizar transa√ß√µes sem expor as informa√ß√µes originais.
Esta rota ser√° utilizada para informar os valores com taxas de parcelamento definidas na configura√ß√£o de pagamento do site cadastradas na Appmax. Ela retorna o valor de cada parcela com base no total do pedido e no tipo de formata√ß√£o selecionado. Existem duas modalidades dispon√≠veis:

PP - ‚ÄúSimples por Parcela‚Äù: Nesta modalidade, a taxa de juros √© aplicada diretamente sobre o valor de cada parcela. O custo adicional √© somado ao valor base da parcela, proporcionando uma visualiza√ß√£o clara e direta do valor final a ser pago em cada m√™s.
AM - ‚ÄúFinanciamento‚Äù: Nesta modalidade, a taxa de juros √© calculada mensalmente sobre o saldo devedor total. O valor das parcelas varia, considerando a aplica√ß√£o de juros sobre o saldo total a cada m√™s.
Essas modalidades atendem a diferentes necessidades de pagamento, sendo o "PP" a mais utilizada, enquanto o "AM" √© configurado em situa√ß√µes espec√≠ficas, mas igualmente relevante. Por isso, √© imprescind√≠vel consultar a rota para garantir que os valores dos pedidos sejam processados de forma consistente em ambos os sistemas, utilizando a mesma taxa.

Essa integra√ß√£o tamb√©m facilita a usabilidade, eliminando a necessidade de configurar manualmente as taxas de parcelamento em sistemas externos, j√° que os valores estar√£o alinhados com as configura√ß√µes definidas na Appmax.

Observa√ß√µes:
A quantidade e os valores das parcelas podem ser personalizados de 1 a 12 parcelas.
Os valores s√£o configur√°veis individualmente para cada merchant.

Exemplo de Requisi√ß√£o (cURL)
POST /v1/payments/credit-card ‚Äî Cria um novo pagamento por cart√£o de cr√©dito vinculado a um pedido existente.

Exemplo de requisi√ß√£o:
cURL

curl --request POST \
     --url https://api.appmax.com.br/v1/payments/credit-card \
     --header 'accept: application/json' \
     --header 'content-type: application/json' \
     --data '{
  "order_id": 12345,
  "customer_id": 407,
  "payment_data": {
    "credit_card": {
      "token": "422146c7523a46119d6073ea56193913",
      "upsell_hash": "12535191020163-1573114925-0097661001572114921",
      "number": "4444222222222222",
      "cvv": "123",
      "expiration_month": "1",
      "expiration_year": "25",
      "holder_document_number": "19100000000",
      "holder_name": "Teste teste",
      "installments": 1,
      "soft_descriptor": "MYSTORE"
    }
  }
}'

Par√¢metros do body:
Campo	Tipo	Obrigat√≥rio	Descri√ß√£o
order_id	number	‚úÖ	ID do pedido
customer_id	number	‚úÖ	ID do cliente
payment_data	object	‚úÖ	Detalhes do pagamento
credit_card	object	‚úÖ	Dados do cart√£o de cr√©dito
Respostas:
201 ‚Äì Pagamento criado com sucesso
400 ‚Äì Erro ao processar (ex.: pedido j√° pago)
404 ‚Äì Pedido n√£o encontrado

5.2.1. C√°lculo de parcelas
Esta rota ser√° utilizada para informar os valores com taxas de parcelamento definidas na configura√ß√£o de pagamento do site cadastradas na Appmax. Ela retorna o valor de cada parcela com base no total do pedido e no tipo de formata√ß√£o selecionado. Existem duas modalidades dispon√≠veis:

PP - ‚ÄúSimples por Parcela‚Äù: Nesta modalidade, a taxa de juros √© aplicada diretamente sobre o valor de cada parcela. O custo adicional √© somado ao valor base da parcela, proporcionando uma visualiza√ß√£o clara e direta do valor final a ser pago em cada m√™s.
AM - ‚ÄúFinanciamento‚Äù: Nesta modalidade, a taxa de juros √© calculada mensalmente sobre o saldo devedor total. O valor das parcelas varia, considerando a aplica√ß√£o de juros sobre o saldo total a cada m√™s.
Essas modalidades atendem a diferentes necessidades de pagamento, sendo o "PP" a mais utilizada, enquanto o "AM" √© configurado em situa√ß√µes espec√≠ficas, mas igualmente relevante. Por isso, √© imprescind√≠vel consultar a rota para garantir que os valores dos pedidos sejam processados de forma consistente em ambos os sistemas, utilizando a mesma taxa.

Essa integra√ß√£o tamb√©m facilita a usabilidade, eliminando a necessidade de configurar manualmente as taxas de parcelamento em sistemas externos, j√° que os valores estar√£o alinhados com as configura√ß√µes definidas na Appmax.

Observa√ß√µes:

A quantidade e os valores das parcelas podem ser personalizados de 1 a 12 parcelas.
Os valores s√£o configur√°veis individualmente para cada merchant.

Para saber mais sobre como calcular o valor total da Order e garantir o envio correto dos valores na cria√ß√£o de pedidos, clique aqui.


cURL

curl --request POST \
     --url https://api.appmax.com.br/v1/payments/installments \
     --header 'accept: application/json' \
     --header 'content-type: application/json' \
     --data '
{
  "installments": 10,
  "total_value": 10000,
  "settings": true
}

5.2.2. Tokeniza√ß√£o do Cart√£o de Cr√©dito via API
POST: https://api.appmax.com.br/v1/payments/tokenize

A tokeniza√ß√£o √© realizada ap√≥s o envio dos dados do cart√£o (como n√∫mero do cart√£o, CVV, etc.) para a API.

Exemplo:
cURL

curl --request POST \
     --url https://api.appmax.com.br/v1/payments/tokenize \
     --header 'accept: application/json' \
     --header 'content-type: application/json' \
     --data '
{
  "payment_data": {
    "credit_card": {
      "number": "4444222222222222",
      "cvv": "123",
      "expiration_month": "12",
      "expiration_year": "28",
      "holder_name": "John Doe"
    }
  }
}
'

5.2.3. Tokeniza√ß√£o de Pagamento com Appmax JS
A tokeniza√ß√£o √© realizada quando um formul√°rio de pagamento √© enviado com o atributo data-appmax-checkout. Durante este processo, os dados sens√≠veis do cart√£o (como n√∫mero do cart√£o, CVV, etc.) s√£o coletados e convertidos em um token seguro. O token √© ent√£o enviado ao servidor em vez dos dados reais, garantindo que informa√ß√µes sens√≠veis n√£o sejam expostas.

üöß
Esperamos o external_id que voc√™ utilizou no retorno HTTP Code 200, em Instala√ß√£o do aplicativo

Exemplo de Formul√°rio de Pagamento:
HTML

<form id="payment-form" method="POST" data-appmax-checkout>
      <div class="form-group">
        <label for="card-number">N√∫mero do Cart√£o:</label>
        <input type="text" id="card-number" name="card-number" appmax-form-element="number" required>
      </div>

      <div class="form-group">
        <label for="card-holder-name">Nome do Titular:</label>
        <input type="text" id="card-holder-name" name="card-holder-name" appmax-form-element="holder_name" required>
      </div>

      <div class="form-group">
        <label for="exp-month">M√™s de Expira√ß√£o:</label>
        <input type="text" id="exp-month" name="exp-month" appmax-form-element="expiration_month" required>
      </div>

      <div class="form-group">
        <label for="exp-year">Ano de Expira√ß√£o:</label>
        <input type="text" id="exp-year" name="exp-year" appmax-form-element="expiration_year" required>
      </div>

      <div class="form-group">
        <label for="cvv">CVV:</label>
        <input type="text" id="cvv" name="cvv" appmax-form-element="cvv" required>
      </div>
  
      <!-- O token ser√° gerado e enviado ao servidor no lugar dos dados reais -->

      <button type="submit">Pagar</button>
</form>
Par√¢metros do Formul√°rio:
Os dados dos cart√µes de cr√©dito s√£o coletados a partir dos seguintes campos utilizando nos inputs o appmax-form-element:

number: N√∫mero do cart√£o de cr√©dito.
holder_name: Nome do titular do cart√£o.
expiration_month: M√™s de expira√ß√£o do cart√£o.
expiration_year: Ano de expira√ß√£o do cart√£o.
cvv: C√≥digo de seguran√ßa do cart√£o (CVV).
5.3. Pagamento via Pix
Entenda como o que √© necess√°rio e como efetuar um pagamento com Pix na Appmax

O Pix oferece pagamento instant√¢neo, dispon√≠vel 24/7, com confirma√ß√£o muito r√°pida.

Ao integrar este endpoint, voc√™ pode gerar um QR Code e/ou o c√≥digo EMV para exibir ao cliente no checkout, possibilitando a conclus√£o do pagamento em poucos segundos.

Importante: exiba um cron√¥metro na p√°gina de sucesso junto com o QR Code e a op√ß√£o de copiar a chave, para que o cliente saiba o tempo restante de expira√ß√£o da chave.

üí°
Importante: exiba um cron√¥metro na p√°gina de sucesso junto com o QR Code e a op√ß√£o de copiar a chave, para que o cliente saiba o tempo restante de expira√ß√£o da chave.

Endpoint:
POST /v1/payments/pix ‚Äî Gera as instru√ß√µes de pagamento via Pix para um pedido existente.

Exemplo de Requisi√ß√£o (cURL)
cURL

curl --request POST \
     --url https://api.appmax.com.br/v1/payments/pix \
     --header 'accept: application/json' \
     --header 'content-type: application/json' \
     --data '
{
  "order_id": 113,
  "payment_data": {
    "pix": {
      "document_number": "19100000000"
    }
  }
}
'
Par√¢metros do body:
Campo	Tipo	Obrigat√≥rio	Descri√ß√£o
order_id	number	‚úÖ	ID do pedido
payment_data	object	‚úÖ	Objeto com dados do pagamento
pix	object	‚úÖ	Objeto vazio para indicar m√©todo Pix
Respostas:
200 ‚Äì Pagamento criado com sucesso (retorna QR Code e EMV)
404 ‚Äì Pedido j√° pago ou n√£o encontrado

6. Criar um Estorno
Entenda como fazer o estorno de um pedido na Appmax

O endpoint POST /v1/orders/refund-request √© utilizado para criar um estorno na Appmax.

Um estorno deve estar sempre vinculado a um pedido previamente criado no sistema.

‚ö†Ô∏è
Pr√©-requisito:

Para criar um estorno, voc√™ precisa ter o order_id do pedido.

Caso ainda n√£o tenha criado o cliente, siga antes a documenta√ß√£o:

Como criar um Pedido na Appmax

Exemplo de Requisi√ß√£o (cURL)
cURL

curl --request POST \
     --url https://api.appmax.com.br/v1/orders/refund-request \
     --header 'accept: application/json' \
     --header 'content-type: application/json' \
     --data '
{
  "order_id": 1,
  "type": "total",
  "value": 10000
}
'
Par√¢metros do Body:
Campo	Tipo	Obrigat√≥rio	Descri√ß√£o
order_id	number	‚úÖ	ID do Pedido (obtido na etapa de cria√ß√£o do pedido)
type	string	‚úÖ	Tipo de reembolso (total ou partial, padr√£o: total)
value	string	‚ÄºÔ∏è	Valor do reembolso
‚ÑπÔ∏è
O value √© obrigat√≥rio caso o type seja partial

Exemplo de Resposta (JSON)
201 ‚Äì Estorno criado com sucesso
JSON

{
  "data": {
    "message": "Refund request accepted"
  }
}
400 ‚Äì Erro de valida√ß√£o

{
  "error": {
    "message": "Error to refund"
  }
}
404 ‚Äì Pedido n√£o encontrado

{
  "error": {
    "message": [
      "Order not found",
      "Site not found"
    ]
  }
}
500 ‚Äì Erro ao gen√©rico
JSON

{
  "error": {
    "message": "Error to refund"
  }
}

7. Criar um Upsell
Como criar um Upsell de um Pedido na Appmax.

O endpoint POST /v1/orders/upsell √© utilizado para criar um upsell na Appmax.

Um upsell deve estar sempre vinculado a um pedido e um pagamento previamente criado no sistema.

‚ö†Ô∏è
Pr√©-requisito:

Para criar um estorno, voc√™ precisa ter o upsell_hash gerado no pagamento do pedido.

Caso ainda n√£o tenha criado o cliente, siga antes a documenta√ß√£o:

Como criar um Pedido na Appmax

Exemplo de Requisi√ß√£o (cURL)
cURL

curl --request POST \
     --url https://api.appmax.com.br/v1/orders/upsell \
     --header 'accept: application/json' \
     --header 'content-type: application/json' \
     --data '
{
  "upsell_hash": "4000114202503117156088040208561001715608804",
  "products_value": 10000,
  "products": [
    {
      "sku": "9000010",
      "name": "Livro de receitas",
      "quantity": 1,
      "unit_value": 12300,
      "type": "digital"
    }
  ]
}
'
Par√¢metros do Body:
Campo	Tipo	Obrigat√≥rio	Descri√ß√£o
upsell_hash	string	‚úÖ	Hash do pedido para Upsell
products_value	number	‚úÖ	Valor total dos produtos do Upsell
products	array	‚úÖ	Produtos do Upsell
Objeto products
Campo	Tipo	Obrigat√≥rio	Descri√ß√£o
sku	string	‚úÖ	SKU do produto
name	string	‚úÖ	Nome do produto
quantity	number	‚úÖ	Quantidade do produto
unit_value	number	‚úÖ	Valor unit√°rio do produto (em centavos)
type	string	‚ùå	Tipo do produto (physical ou digital, padr√£o: physical)
Exemplo de Resposta (JSON)
201 ‚Äì Upsell criado com sucesso
JSON

{
  "data": {
    "message": "Transa√ß√£o efetuada com sucesso",
    "redirect_url": "example.com/order/success-by-order?hash=40001142025031-1715608804-0190017001715608804"
  }
}
404 ‚Äì Pedido n√£o encontrado

{
  "data": {
    "errors": {
      "message": "Order not found"
    }
  }
}
422 ‚Äì Erro ao validar os dados

{
  "errors": {
    "message": {
      "upsell_hash": [
        "The upsell hash field is required.",
        "The Upsell Hash must be a string."
      ]
    }
  }
}

8. Recorr√™ncia na Appmax
Como criar um pedido recorrente na Appmax

A recorr√™ncia √© uma funcionalidade oferecida pela Appmax que permite ao merchant configurar cobran√ßas peri√≥dicas.
Para utiliz√°-la, o merchant precisa:

Instalar um aplicativo de recorr√™ncia internamente em seu acesso na Appmax.
Configurar a recorr√™ncia manualmente em sua plataforma.
Para que a recorr√™ncia funcione no seu aplicativo, √© necess√°rio enviar, nos endpoints de cart√£o de cr√©dito e Pix, as informa√ß√µes do objeto subscription, contendo os seguintes campos:

interval: define o per√≠odo da recorr√™ncia, podendo ser mensal, anual ou semanal.
interval_count: representa a quantidade de ciclos do intervalo definido, aceitando valores de 1 a 12.
O objeto payment_data do cart√£o e do Pix permanece o mesmo, basta adicionar o objeto subscription. Essa configura√ß√£o funciona tanto para cart√µes tokenizados quanto para cart√µes n√£o tokenizados.

JSON

{
    "order_id": 99,
    "payment_data": {
        //credit_card, pix..
        "subscription": {
            "interval": "month",
            "interval_count": 1
        }
    }
}
Par√¢metros do Body:
Nome	Tipo	Obrigat√≥rio	Valores Validos
interval	string	‚úÖ	month ou year
interval_count	string	‚úÖ	valores de 1 a 12.

10. Recupera√ß√£o de Vendas com IA
Entenda como utilizar a Recupera√ß√£o de Vendas com IA da Appmax

Esta rota permite criar um carrinho abandonado utilizando a recupera√ß√£o de vendas com IA da Appmax.

‚ö†Ô∏è
Pr√©-requisito:

Para criar um cliente, voc√™ precisa ter feito a coleta de IP utilizando o script Appmax JS.

Caso ainda n√£o tenha feito a coleta de IP, siga antes a documenta√ß√£o:

Coletar IP do Cliente

Exemplo de Requisi√ß√£o (cURL)
cURL

curl --request POST \
     --url https://api.appmax.com.br/v1/customers \
     --header 'accept: application/json' \
     --header 'content-type: application/json' \
     --data '
{
  "first_name": "Junior",
  "last_name": "Almeida",
  "email": "junior.almeida@email.com",
  "phone": "51983655100",
  "document_number": "25226493029",
  "cart_link": "https://subdomain.domain.com/cart/123-345-678",
  "address": {
    "postcode": "91520270",
    "street": "Rua Francisco Carneiro da Rocha",
    "number": "582",
    "complement": "Casa",
    "district": "Moinhos de Ventos",
    "city": "Porto Alegre",
    "state": "RS"
  },
  "ip": "127.0.0.1",
  "products": [
    {
      "sku": "9000010",
      "name": "Livro de receitas",
      "quantity": 1,
      "unit_value": 12300,
      "type": "digital"
    }
  ],
  "tracking": {
    "utm_source": "google",
    "utm_campaign": "teste"
  }
}
'
Par√¢metros do Body:
Campo	Tipo	Obrigat√≥rio	Descri√ß√£o
first_name	string	‚úÖ	Nome do cliente
last_name	string	‚úÖ	Sobrenome do cliente
email	string	‚úÖ	E-mail v√°lido
phone	string	‚úÖ	Telefone com DDD
document_number	string	‚ùå	CPF ou CNPJ
address	object	‚ùå	Endere√ßo do cliente
ip	string	‚úÖ	IP de origem
products	array	‚úÖ	Lista de produtos vinculados
tracking	object	‚ùå	Dados de origem da visita
cart_link	string	‚úÖ	URL do carrinho
Exemplo de Resposta (JSON)
201 ‚Äì Cliente criado com sucesso
JSON

{
  "data": {
    "customer": {
      "id": 1
    }
  }
}
422 ‚Äì Erro de valida√ß√£o dos dados
JSON

{
  "message": "The given data failed to pass validation.",
  "errors": {
    "message": {
      "first_name": [
        "The first_name field is required."
      ],
      "last_name": [
        "The last_name field is required."
      ],
      "phone": [
        "The phone field must be a string.",
        "The phone field must have a maximum of 11 characters."
      ],
      "email": [
        "The email field is required.",
        "The email field must be a string."
      ],
      "ip": [
        "The ip field is required."
      ]
    }
  }
}
‚ö†Ô∏è
Importante:

Guarde o valor de customer_id retornado nesta etapa, mesmo que temporariamente.

Ele ser√° necess√°rio para criar o pedido na pr√≥xima etapa do fluxo.

Sem este ID, n√£o ser√° poss√≠vel criar um pedido pois √© necess√°rio vincular o cliente ao pedido.